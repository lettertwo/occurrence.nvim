*occurrence.nvim.txt*     For NVIM >= v0.10.0     Last change: 2025 October 21

==============================================================================
Table of Contents                          *occurrence.nvim-table-of-contents*

1. occurrence.nvim                           |occurrence.nvim-occurrence.nvim|
  - Features                        |occurrence.nvim-occurrence.nvim-features|
  - Installation                |occurrence.nvim-occurrence.nvim-installation|
  - Quick Start                  |occurrence.nvim-occurrence.nvim-quick-start|
  - Usage                              |occurrence.nvim-occurrence.nvim-usage|
  - Configuration              |occurrence.nvim-occurrence.nvim-configuration|
  - Available Actions      |occurrence.nvim-occurrence.nvim-available-actions|
  - Development                  |occurrence.nvim-occurrence.nvim-development|
  - License                          |occurrence.nvim-occurrence.nvim-license|

==============================================================================
1. occurrence.nvim                           *occurrence.nvim-occurrence.nvim*

A modern Neovim plugin for intelligent occurrence highlighting and operations.
Mark occurrences of words/patterns in a buffer and perform operations on them,
similar to multiple cursor functionality but with vim-native operators.


FEATURES                            *occurrence.nvim-occurrence.nvim-features*

- üîç **Smart Occurrence Detection**: Find word under cursor, visual selections, or last search patterns
- üéØ **Visual Highlighting**: Mark and highlight occurrences using Neovim‚Äôs extmarks system
- ‚ö° **Vim Operator Integration**: Use native vim operators (`c`, `d`, `y`, etc.) on marked occurrences
- üéÆ **Multiple Interaction Modes**: Preset actions, operator-pending mode, and operator modifiers
- üîß **Highly Configurable**: Customize keymaps, operators, and behavior
- üèóÔ∏è **Modern Architecture**: Built with proper resource management and performance in mind


INSTALLATION                    *occurrence.nvim-occurrence.nvim-installation*


USING LAZY.NVIM ~

>lua
    {
      "occurrence.nvim",
      config = function()
        require("occurrence").setup()
      end,
    }
<


USING PACKER.NVIM ~

>lua
    use {
      "occurrence.nvim",
      config = function()
        require("occurrence").setup()
      end,
    }
<


QUICK START                      *occurrence.nvim-occurrence.nvim-quick-start*

With default configuration:

1. **Mark occurrences**: Place cursor on a word and press `go` (normal mode) or select text and press `go` (visual mode)
2. **Navigate**: Use `n`/`N` to jump between marked occurrences, or `gn`/`gN` for all occurrences
3. **Mark individual**: `ga` to mark current occurrence, `gx` to unmark
4. **Toggle mark**: `go` to toggle mark on current occurrence
5. **Apply operations**: Use vim operators like `c` (change), `d` (delete), `y` (yank) on marked occurrences
6. **Exit**: Press `<Esc>` to clear all marks and return to normal mode


USAGE                                  *occurrence.nvim-occurrence.nvim-usage*


BASIC WORKFLOW ~

>vim
    " 1. Mark word under cursor
    go
    
    " 2. Navigate through marked occurrences
    n          " Next marked occurrence
    N          " Previous marked occurrence
    gn         " Next occurrence (all)
    gN         " Previous occurrence (all)
    
    " 3. Mark/unmark individual occurrences
    ga         " Mark current occurrence
    gx         " Unmark current occurrence
    
    " 4. Apply operations to all marked occurrences
    c          " Change all marked occurrences
    d          " Delete all marked occurrences
    y          " Yank all marked occurrences
    >          " Indent all marked occurrences right
    <          " Indent all marked occurrences left
    
    " 5. Exit occurrence mode
    <Esc>      " Clear marks and exit
<


VISUAL MODE OPERATIONS ~

>vim
    " Select text and mark all occurrences
    v          " Enter visual mode
    /pattern   " Select text
    go         " Mark all occurrences of selection
    
    " Mark/unmark within selection
    go         " Mark all occurrences in selection (if already active)
    ga         " Mark occurrences in selection
    gx         " Unmark occurrences in selection
<


OPERATOR-PENDING MODE ~

Use the `o` modifier to activate occurrence mode within vim operators:

>vim
    " Change word occurrences with motion
    coo w      " Change occurrences of word with word motion
    doo $      " Delete occurrences of word to end of line
    yoo ip     " Yank occurrences of word in paragraph
<


CONFIGURATION                  *occurrence.nvim-occurrence.nvim-configuration*


DEFAULT CONFIGURATION ~

>lua
    require("occurrence").setup({
      -- Action keymaps (entry points)
      actions = {
        n = {
          go = "mark_search_or_word",  -- Mark word under cursor or last search
        },
        v = {
          go = "mark_selection",       -- Mark visual selection
        },
        o = {
          o = "modify_operator",       -- Operator modifier (e.g., coo, doo)
        },
      },
    
      -- Preset action keymaps (active when occurrences are marked)
      preset_actions = {
        n = {
          -- Navigation
          n = "goto_next_mark",        -- Next marked occurrence
          N = "goto_previous_mark",    -- Previous marked occurrence
          gn = "goto_next",            -- Next occurrence (all)
          gN = "goto_previous",        -- Previous occurrence (all)
    
          -- Mark/unmark
          go = "mark_word_or_toggle_mark",  -- Mark word or toggle current
          ga = "mark",                 -- Mark current occurrence
          gx = "unmark",               -- Unmark current occurrence
    
          -- Exit
          ["<Esc>"] = "deactivate",    -- Clear marks and exit
        },
        v = {
          go = "mark_selection_or_toggle_marks_in_selection",
          ga = "mark",
          gx = "unmark",
        },
      },
    
      -- Operator support
      operators = {
        ["c"] = "change",             -- Change marked occurrences
        ["d"] = "delete",             -- Delete marked occurrences
        ["y"] = "yank",               -- Yank marked occurrences
        ["<"] = "indent_left",        -- Indent left
        [">"] = "indent_right",       -- Indent right
        ["gu"] = "lowercase",         -- Convert to lowercase
        ["gU"] = "uppercase",         -- Convert to uppercase
        ["g~"] = "swap_case",         -- Swap case
        ["g?"] = "rot13",             -- ROT13 encoding
      },
    })
<


CUSTOM CONFIGURATION EXAMPLES ~


MINIMAL CONFIGURATION

>lua
    require("occurrence").setup({
      actions = {
        n = { ["<leader>o"] = "mark_word" },
      },
      preset_actions = {
        n = {
          ["<Esc>"] = "deactivate",
          ["n"] = "goto_next_mark",
          ["N"] = "goto_previous_mark",
        },
      },
    })
<


ADVANCED CONFIGURATION

>lua
    require("occurrence").setup({
      actions = {
        n = {
          ["<leader>oh"] = "mark_search_or_word",
          ["<leader>ow"] = "mark_word",
          ["<leader>os"] = "find_last_search",
        },
        v = {
          ["<leader>o"] = "mark_selection",
        },
      },
      preset_actions = {
        n = {
          -- Custom navigation
          ["<Tab>"] = "goto_next_mark",
          ["<S-Tab>"] = "goto_previous_mark",
    
          -- Batch operations
          ["<leader>a"] = "mark_all",
          ["<leader>x"] = "unmark_all",
    
          -- Exit
          ["q"] = "deactivate",
          ["<Esc>"] = "deactivate",
        },
      },
      -- Disable some operators
      operators = {
        ["c"] = "change",
        ["d"] = "delete",
        ["y"] = "yank",
        ["g?"] = false,  -- Disable ROT13
      },
    })
<


STATUSLINE INTEGRATION ~

Display occurrence count in your statusline similar to Neovim‚Äôs search count
using the `status()` API:

>lua
    -- Example: lualine component
    local function occurrence_status()
      local count = require('occurrence').status()
      if not count then
        return ""
      end
      return string.format("[%d/%d]", count.current, count.total)
    end
    
    require('lualine').setup({
      sections = {
        lualine_c = { 'filename', occurrence_status },
      }
    })
<

>lua
    -- Example: statusline function with icons
    function _G.occurrence_statusline()
      local count = require('occurrence').status({ marked = true })
      if not count then
        return ""
      end
    
      local icon = count.exact_match == 1 and "" or "Û∞çâ"
      return string.format("%s %d/%d", icon, count.current, count.total)
    end
    
    -- Add to your statusline
    vim.opt.statusline = "%f %{%v:lua.occurrence_statusline()%}"
<

**API: require('occurrence').status(opts)**

Returns `nil` if no active occurrence, otherwise returns:

- `current` (integer): Current match index (1-based)
- `total` (integer): Total number of matches
- `exact_match` (integer): 1 if cursor is on a match, 0 otherwise
- `marked_only` (boolean): Whether counting only marked occurrences

Options:

- `marked` (boolean): Count only marked occurrences (default: false)
- `buffer` (integer): Buffer number (default: current buffer)


AVAILABLE ACTIONS          *occurrence.nvim-occurrence.nvim-available-actions*


ENTRY ACTIONS ~

- `find_word` - Find occurrences of word under cursor
- `find_selection` - Find occurrences of visual selection
- `find_last_search` - Find occurrences of last search pattern
- `find_search_or_word` - Find search pattern or word under cursor
- `mark_word` - Mark all occurrences of word under cursor
- `mark_selection` - Mark all occurrences of visual selection
- `mark_search_or_word` - Mark search pattern or word under cursor


PRESET ACTIONS (ACTIVE MODE) ~

- `goto_next` / `goto_previous` - Navigate through all occurrences
- `goto_next_mark` / `goto_previous_mark` - Navigate through marked occurrences
- `mark` / `unmark` - Mark/unmark current occurrence
- `toggle_mark` - Toggle mark on current occurrence
- `mark_all` / `unmark_all` - Mark/unmark all occurrences
- `mark_in_selection` / `unmark_in_selection` - Mark/unmark in visual selection
- `deactivate` - Clear all marks and exit


OPERATORS ~

- `change` - Change marked occurrences (with input prompt)
- `delete` - Delete marked occurrences
- `yank` - Yank marked occurrences to register
- `indent_left` / `indent_right` - Adjust indentation
- `uppercase` / `lowercase` / `swap_case` - Case conversion
- `rot13` - ROT13 encoding


DEVELOPMENT                      *occurrence.nvim-occurrence.nvim-development*


MODERN TOOLCHAIN (2024) ~

occurrence.nvim uses modern Neovim development practices:

- **Documentation**: Auto-generated with panvimdoc <https://github.com/kdheepak/panvimdoc> from this README
- **Type Safety**: LuaCATS <https://luals.github.io/wiki/annotations/> annotations with lua-language-server
- **CI/CD**: GitHub Actions with automated testing and releases
- **Package Management**: Published to LuaRocks <https://luarocks.org/modules/lettertwo/occurrence.nvim> with automated releases
- **Testing**: busted <https://github.com/lunarmodules/busted> with performance benchmarks


RUNNING TESTS ~

>bash
    # Install dependencies
    luarocks --local install busted
    luarocks --local install nlua
    
    # Run all tests
    make test
    
    # Run performance tests only
    make test-perf
<


PROJECT STRUCTURE ~

- `lua/occurrence.lua` - Main plugin entry point with LuaCATS annotations
- `lua/occurrence/` - Core plugin modules
    - `Occurrence.lua` - Central occurrence management
    - `BufferState.lua` - Per-buffer state management
    - `Config.lua` - Configuration handling
    - `actions.lua` - Built-in actions
    - `operators.lua` - Built-in operators
- `tests/` - Test suite including performance tests
- `.github/workflows/` - CI/CD automation
- `doc/` - Auto-generated vim help (via panvimdoc)


RELEASE PROCESS ~

Releases are automated via GitHub Actions: 1. Push a version tag (e.g.,
`v1.0.0`) 2. Tests run automatically 3. GitHub release created 4. Package
published to LuaRocks


LICENSE                              *occurrence.nvim-occurrence.nvim-license*

MIT

Generated by panvimdoc <https://github.com/kdheepak/panvimdoc>

vim:tw=78:ts=8:noet:ft=help:norl:
